import{s as h,c as _}from"./useTable.BHeNOiVT.js";import{d as g,j as b,ar as B,x as u,z as d,o as C,c as T,l as w,aC as p,m,aQ as x}from"./framework.MvfB4Ynr.js";const z={class:"assistant statistics"},E=["innerHTML"],R=g({__name:"Statistic",props:{value:{default:null},chart:{default:null},visible:{type:Boolean,default:!1},statistical:{default:0},collect:{type:Function,default:h}},setup(t){const s=t;let l;const i=b(null),{chart:e,visible:r,value:v}=B(s),n=()=>{console.log("统计"),l=clearTimeout(l),l=setTimeout(()=>{i.value=s.collect(p(m(e)),p(m(v)))},s.statistical)};u(()=>r.value,a=>{n(),a&&c()}),u(()=>e.value,()=>{c()}),d(()=>{c()}),d(()=>{f()});function c(){var a,o;f(),e.value&&((a=e.value)==null||a.on("datazoom",n),(o=e.value)==null||o.on("legendselectchanged",n))}function f(){var a,o;console.log(" props?.chart",e.value),e.value&&((a=e.value)==null||a.off("datazoom",n),(o=e.value)==null||o.off("legendselectchanged",n))}return(a,o)=>(C(),T("div",z,[w("div",{innerHTML:i.value},null,8,E)]))}});function y(){const t=x({value:null,chart:null,visible:!1,statistical:0}),{close:s,open:l}=_(R,t),i=e=>{e!==void 0?t.visible=e:t.visible=!t.visible};return u(()=>t.visible,(e,r,v)=>{e?l():s()},{immediate:!0}),{close:s,open:l,props:t,toggleStatistic:i}}export{y as u};
