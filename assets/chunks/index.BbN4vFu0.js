import{cs as V,G as I,L as Z,M as P,W as Q,X as d,Q as R,R as X}from"./Highlight.vue.CIQc0ySX.js";import{u as $}from"./useECharts.B0EdhTZV.js";import{b as _,a as nn}from"./render.i2JnFkTj.js";import{u as tn}from"./useStatistic.ky00E4BZ.js";import{u as en}from"./useTable.ukpj1q0g.js";function un(O,e){var g,c=O?$(O):{},b=c.setOptions,Y=b===void 0?null:b,A=c.echarts,j=A===void 0?null:A,M=c.getInstance,T=M===void 0?function(){}:M,C=c.container,E=C===void 0?null:C,G=en(),v=G.props,q=G.toggleTable;v.container=E;var L=tn(),W=L.props,w=L.toggleStatistic,z=function(o,l){var r,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T();o=(r=o)!==null&&r!==void 0?r:{};var n=JSON.parse(JSON.stringify(o)),a=I({},B,l);if(n!=null){var p,x,N,y,S;if(v.value=n,v.chart=u,W.chart=u,W.value=n,(n==null||(p=n.filterCodes)===null||p===void 0?void 0:p.length)>0){var h;n.dimensions=n==null||(h=n.dimensions)===null||h===void 0?void 0:h.filter(function(t){return!n.filterCodes.includes((t==null?void 0:t.code)||t)})}a.dataset.source=n.source,a.series=(x=n.dimensions)===null||x===void 0?void 0:x.filter(function(t,s){return s}).map(function(t,s){var K={x:0,y:s+1},U=a.yAxis.findIndex(function(H){return H&&H.$layout&t.code});return I({yAxisIndex:U,encode:K,name:t.name,selected:t.selected},k(t,s,a))});var f=J(n,a);f!=null&&f.length&&(N=a.series).push.apply(N,Z(f));var m=F(n,a);m!=null&&m.length&&a.series.push(I({data:m},P.mark.series)),a.legend.data=a==null||(y=a.series)===null||y===void 0?void 0:y.map(function(t){return{name:t.name,textStyle:{color:t.color}}}),a.legend.selected=(S=a.series)===null||S===void 0?void 0:S.reduce(function(t,s){return t[s.name]=s.selected!=null?s.selected:!0,t},{})}return a},k=e!=null&&e.S?e.S:function(i,o,l){return l.$series.find(function(r){return r.$code&i.code})},F=e!=null&&e.M?e.M:function(i,o){return _(i,o,P.mark)},J=e!=null&&e.I?e.I:function(i,o){return nn(i,o)},B=(g=e==null?void 0:e.C)!==null&&g!==void 0?g:V,D=function(o){if(o==null)return null;var l=Q(o,d.FLOW),r=Q(o,d.STAGE);return{yAxis:[{layout:d.FLOW,name:"流量(m³/s)",min:function(n){return R(n,l)},max:function(n){return X(n,l)}},{layout:d.STAGE,name:"水位(m)",min:function(n){return R(n,r)},max:function(n){return X(n,r)}}]}};return{createOptions:D,setOptions:Y,echarts:j,getInstance:T,container:E,assemble:z,toSeries:k,toMarks:F,toIndices:J,toggleTable:q,toggleStatistic:w}}export{un as u};
