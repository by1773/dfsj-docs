import{cr as z,G as b,L as B,M as d,W as F,X as v,Q as J,R as N}from"./Highlight.vue.D_fJ9qMV.js";import{b as D,a as K}from"./render.XzaDXgKw.js";import{u as P}from"./useECharts.CWpbxe_8.js";function $(O,i){var r=this,x,c=O?P(O):{},S=c.setOptions,H=S===void 0?null:S,A=c.echarts,Q=A===void 0?null:A,M=c.getInstance,k=M===void 0?function(){}:M,C=c.container,R=C===void 0?null:C,X=function(e,u){var a;arguments.length>2&&arguments[2]!==void 0?arguments[2]:k(),e=(a=e)!==null&&a!==void 0?a:{};var o=JSON.parse(JSON.stringify(e)),n=b({},Y,u);if(o!=null){var g,y,L,p,I;if((o==null||(g=o.filterCodes)===null||g===void 0?void 0:g.length)>0){var h;o.dimensions=o==null||(h=o.dimensions)===null||h===void 0?void 0:h.filter(function(t){return!o.filterCodes.includes((t==null?void 0:t.code)||t)})}n.dataset.source=o.source,n.series=(y=o.dimensions)===null||y===void 0?void 0:y.filter(function(t,l){return l}).map(function(t,l){var q={x:0,y:l+1},w=n.yAxis.findIndex(function(W){return W&&W.$layout&t.code});return b({yAxisIndex:w,encode:q,name:t.name,selected:t.selected},E(t,l,n))});var f=T(o,n);f!=null&&f.length&&(L=n.series).push.apply(L,B(f));var m=G(o,n);m!=null&&m.length&&n.series.push(b({data:m},d.mark.series)),n.legend.data=n==null||(p=n.series)===null||p===void 0?void 0:p.map(function(t){return{name:t.name,textStyle:{color:t.color}}}),n.legend.selected=(I=n.series)===null||I===void 0?void 0:I.reduce(function(t,l){return t[l.name]=l.selected!=null?l.selected:!0,t},{}),n.toolbox.feature.myStatistics={onclick:function(){return r.tools.statistics=!r.tools.statistics},icon:d.icon.statistics,title:"统计"},n.toolbox.feature.myTabulation={onclick:function(){return r.tools.tabulation=!r.tools.tabulation},icon:d.icon.tabulation,title:"表格"}}return n},E=i!=null&&i.S?i.S:function(s,e,u){return u.$series.find(function(a){return a.$code&s.code})},G=i!=null&&i.M?i.M:function(s,e){return D(s,e,d.mark)},T=i!=null&&i.I?i.I:function(s,e){return K(s,e)},Y=(x=i==null?void 0:i.C)!==null&&x!==void 0?x:z,j=function(e){if(e==null)return null;var u=F(e,v.FLOW),a=F(e,v.STAGE);return{yAxis:[{layout:v.FLOW,name:"流量(m³/s)",min:function(n){return J(n,u)},max:function(n){return N(n,u)}},{layout:v.STAGE,name:"水位(m)",min:function(n){return J(n,a)},max:function(n){return N(n,a)}}]}};return{createOptions:j,setOptions:H,echarts:Q,getInstance:k,container:R,assemble:X,toSeries:E,toMarks:G,toIndices:T}}export{$ as u};
